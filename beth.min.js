$(document,window,void 0).ready(function(){Beth._refreshInterval=70,Beth._init()});class Beth{constructor(){this._init()}static _init(){Beth._initialized=!1,Beth._initDynamicHtml(),Beth._initInputValues(),Beth._bindDirectives(),Beth._bindVariables(),Beth._initialized=!0}static _initDynamicHtml(){Beth.binds=[];var e=document.documentElement.innerHTML,t=e,a=e.match(/\{\{.*\}\}/g);null==a&&(a=[]);for(var r=0,i=a.length;r<i;r++){var n,h=a[r],l=$.trim(Beth._extractTextBetween(h,"{{","}}"));t=e,void 0!==(n=Beth._parseValue(l))?(Beth.binds.push(l),t=e.replace(h,'<beth data-bind="'+(Beth.binds.length-1)+'">'+Beth._unescapeReal(n)+"</beth>")):$('[beth-bind="'+l+'"][beth-default]').length>0?(Beth._declareVar(l,$('[beth-bind="'+l+'"][beth-default]').first().attr("beth-default")),Beth.binds.push(l),t=e.replace(h,'<beth data-bind="'+(Beth.binds.length-1)+'">'+Beth._unescapeReal($('[beth-bind="'+l+'"][beth-default]').first().attr("beth-default"))+"</beth>")):t=e.replace(h,""),e=t}document.documentElement.innerHTML=t}static _bindVariables(){$("textarea[beth-bind], input[beth-bind][type!='radio'][type!='checkbox'], select[beth-bind]").each(function(){var bethvar_name=$(this).attr("beth-bind");if(Beth._isVarDefined(bethvar_name))try{var bethvar_value=eval(bethvar_name);bethvar_value!=$(this).val()&&(eval(bethvar_name+" = $(this).val()"),Beth._triggerEvent($(this),"change"))}catch(e){console.warn("Beth: Variable not defined",e)}}),$("input[beth-bind][type='radio']").each(function(){var bethvar_name=$(this).attr("beth-bind");if($(this).is(":checked")&&Beth._isVarDefined(bethvar_name))try{var bethvar_value=eval(bethvar_name);bethvar_value!=$(this).val()&&(eval(bethvar_name+" = $(this).val()"),Beth._triggerEvent($(this),"change"))}catch(e){console.warn("Beth: Variable not defined",e)}}),$("input[beth-bind][type='checkbox']").each(function(){var bethvar_name=$(this).attr("beth-bind");if(Beth._isVarDefined(bethvar_name))try{var bethvar_value=eval(bethvar_name);bethvar_value!=$(this).is(":checked")&&(eval(bethvar_name+" = $(this).is(':checked')"),Beth._triggerEvent($(this),"change"))}catch(e){console.warn("Beth: Variable not defined",e)}}),$("beth").each(function(){var newHtml=eval(Beth.binds[parseInt($(this).data("bind"))]);$(this).html()!=newHtml&&$(this).html(Beth._unescapeReal(newHtml))}),setTimeout(function(){Beth._bindVariables()},Beth._refreshInterval)}static _initInputValues(){$("textarea[beth-default]:not([beth-bind]), input[beth-default]:not([beth-bind]), select[beth-default]:not([beth-bind])").each(function(){try{var bethvar_name=$(this).val(eval($(this).attr("beth-default")))}catch(e){var bethvar_name=$(this).val($(this).attr("beth-default"))}}),$("textarea[beth-bind], input[beth-bind][type!='radio'][type!='checkbox'], select[beth-bind]").each(function(){try{var bethvar_name=$(this).attr("beth-bind");Beth._declareVar(bethvar_name,$(this).attr("beth-default")),$(this).val(Beth._unescapeReal(eval($(this).attr("beth-bind"))))}catch(e){$(this).removeAttr("beth-bind"),console.warn("Beth: Variable not defined",e)}}),$("input[beth-bind][type='radio']").each(function(){try{var bethvar_name=$(this).attr("beth-bind");Beth._declareVar(bethvar_name,$(this).attr("beth-default")),$(this).prop("checked",Beth._unescapeReal(eval($(this).attr("beth-bind")))==$(this).val())}catch(e){$(this).removeAttr("beth-bind"),console.warn("Beth: Variable not defined",e)}}),$("input[beth-bind][type='checkbox']").each(function(){try{var bethvar_name=$(this).attr("beth-bind");Beth._declareVar(bethvar_name,$(this).attr("beth-default")),$(this).prop("checked",!!eval($(this).attr("beth-bind")))}catch(e){$(this).removeAttr("beth-bind"),console.warn("Beth: Variable not defined",e)}})}static _bindDirectives(){$("[beth-hide]").each(function(){try{var hide=eval($(this).attr("beth-hide"));1==hide?$(this).hide():$(this).show()}catch(e){$(this).removeAttr("beth-hide"),console.warn("Beth: Hide eval error",e)}}),$("[beth-disable]").each(function(){try{var disable=eval($(this).attr("beth-disable"));1==disable?$(this).prop("disabled",!0):$(this).prop("disabled",!1)}catch(e){$(this).removeAttr("beth-disable"),console.warn("Beth: Hide eval error",e)}}),$("[beth-if]").each(function(){try{var result=eval($(this).attr("beth-if"));1!=result&&$(this).remove()}catch(e){console.warn("Beth: Hide eval error",e)}$(this).removeAttr("beth-if")}),setTimeout(function(){Beth._bindDirectives()},Beth._refreshInterval)}static _watchVar(varname){if(varname.indexOf(".")>-1)var varname_arr=varname.split("."),prop=varname_arr.pop(),obj=varname_arr.join("."),realObj=eval(obj);else var prop=varname,realObj=window;realObj.watch(prop,function(e,t,a){realObj.unwatch(e),console.log("[beth-bind='"+varname+"']"),$("[beth-bind='"+varname+"']").each(function(){"radio"==$(this).prop("type")?$(this).prop("checked",a==$(this).val()):"checkbox"==$(this).prop("type")?$(this).prop("checked",a):$(this).val(Beth._unescapeReal(a)).change()}),realObj[prop]!=a&&(realObj[prop]=a),setTimeout(function(){Beth._watchVar(varname)},Beth._refreshInterval)})}static _triggerEvent(selector,event){var callback=selector.attr("beth-"+event);void 0!==callback&&Beth._initialized&&eval(callback)}static _unescapeReal(e){for(var t=e;t!==unescape(t);)t=unescape(t);return t}static _declareVar(varname,varvalue=null){if(Beth._watchVar(varname),Beth._isVarDefined(varname))return!1;varvalue=Beth._parseValue(varvalue);try{return eval("window."+varname+'="'+escape(varvalue)+'";'),"null"!=eval("window."+varname)&&"undefined"!=eval("window."+varname)||eval("window."+varname+'="";'),!0}catch(e){return!1}}static _isVarDefined(varname){var valid=!0;try{if(valid=eval("typeof "+varname+" !== 'undefined'"),valid){var varvalue=eval(varname);valid=void 0!==varvalue||-1==Beth.binds.indexOf(varname)}}catch(e){valid=!1}return valid}static _parseValue(varvalue){if(void 0!==varvalue)try{varvalue=eval(varvalue)}catch(e){varvalue=String(varvalue)}else varvalue="";return varvalue}static _extractTextBetween(e,t,a){var r=e;try{return e.split(t)[1].split(a)[0]}catch(e){return r}}}Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(e,t){var a=this[e],r=a;delete this[e]&&Object.defineProperty(this,e,{get:function(){return r},set:function(i){return a=r,r=t.call(this,e,a,i)},enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(e){var t=this[e];delete this[e],this[e]=t}});